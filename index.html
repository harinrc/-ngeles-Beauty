<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ángeles Beauty - Productos Exclusivos</title>
    
    <link rel="stylesheet" href="style.css"> 

</head>
<body>

    <header>
        <h1>Ángeles Beauty</h1>
        
        <button id="menu-hamburguesa" class="menu-hamburguesa" aria-label="Abrir menú">
            &#9776;
        </button>

        <nav id="menu-principal">
            <ul>
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#productos">Productos</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
        </nav>
    </header>

    <main>
        
        <section id="inicio">
            <h2>Productos de Belleza Exclusivos</h2>
            <p>Descubre nuestra selección única para realzar tu belleza.</p>
            
            <a href="https://wa.me/50586297639?text=Hola,%20quiero%20más%20información" class="boton-whatsapp" target="_blank">
                Contáctanos por WhatsApp
            </a>
        </section>

        <section id="productos">
            <h2>Nuestros Productos</h2>
            
            <div class="galeria-productos">
                <p>Cargando productos...</p>
            </div> 

        </section>

    </main>

    <footer id="contacto">
        <p>Sigue a Ángeles Beauty en redes sociales.</p>
        <p>&copy; 2025 Ángeles Beauty. Creado con ❤️.</p>
    </footer>


    <script type="module">
    
      // --- 1. INICIALIZACIÓN DE FIREBASE ---
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
      import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js";
      
      // ¡¡MUY IMPORTANTE!!
      // Pega aquí tu objeto 'firebaseConfig' que copiaste de la consola de Firebase
      const firebaseConfig = {
    apiKey: "AIzaSyAPUPxZNuJfX3KtiI1p73AAfDgNqVo8a-g",
    authDomain: "tienda-angeles-beauty.firebaseapp.com",
    projectId: "tienda-angeles-beauty",
    storageBucket: "tienda-angeles-beauty.firebasestorage.app",
    messagingSenderId: "913588395045",
    appId: "1:913588395045:web:ce50c2f7a296c85ecff3cc"
  };

      // Inicializa Firebase App
      const app = initializeApp(firebaseConfig);
      // Inicializa Cloud Firestore
      const db = getFirestore(app);

      
      // --- 2. LÓGICA DE LA PÁGINA (HEADER, MENÚ Y PRODUCTOS) ---
      
      // Espera a que todo el contenido de la página se cargue
      window.addEventListener('DOMContentLoaded', (event) => {

          /* CÓDIGO 1: HEADER STICKY */
          const header = document.querySelector('header');
          if (header) { 
              window.addEventListener('scroll', function() {
                  if (window.scrollY > 50) {
                      header.classList.add('header-scrolled');
                  } else {
                      header.classList.remove('header-scrolled');
                  }
              });
          }

          /* CÓDIGO 2: MENÚ HAMBURGUESA */
          const botonMenu = document.querySelector('#menu-hamburguesa');
          const menuPrincipal = document.querySelector('#menu-principal');
          if (botonMenu && menuPrincipal) {
              botonMenu.addEventListener('click', () => {
                  menuPrincipal.classList.toggle('menu-abierto');
              });
          }


          /* CÓDIGO 3: CARGAR PRODUCTOS DESDE FIRESTORE (CORREGIDO) */
          
          async function cargarProductos() {
              const galeria = document.querySelector('.galeria-productos');
              
              try {
                  const productosCol = collection(db, 'productos');
                  const productosSnapshot = await getDocs(productosCol);
                  
                  if (productosSnapshot.empty) {
                      galeria.innerHTML = "<p>No hay productos para mostrar en este momento.</p>";
                      return; 
                  }
                  
                  galeria.innerHTML = ""; // Limpiamos el "Cargando..."
                  
                  productosSnapshot.forEach(doc => {
                      const producto = doc.data(); 

                      console.log("Datos recibidos de Firebase:", producto);
                      
                      const tarjeta = document.createElement('article');
                      tarjeta.className = 'tarjeta-producto'; 

                      // --- Arreglo de WhatsApp ---
                      const textoMensaje = `Hola, me interesa el producto ${producto.nombre}`;
                      const textoCodificado = encodeURIComponent(textoMensaje);

                      // ¡¡RECUERDA PONER TU NÚMERO REAL AQUÍ!!
                      const enlaceWhatsApp = `https://wa.me/50586297639?text=${textoCodificado}`;
                      
                      // --- Creación de la tarjeta ---
                      tarjeta.innerHTML = `
                          <img src="${producto.imagenUrl}" alt="Imagen de ${producto.nombre}">
                          <h3>${producto.nombre}</h3>
                          <p class="precio">${producto.precio}</p>
                          <a href="${enlaceWhatsApp}" class="boton-comprar" target="_blank">
                              Preguntar por WhatsApp
                          </a>
                      `;
                      
                      // --- ¡LA LÍNEA QUE FALTABA! ---
                      galeria.appendChild(tarjeta);
                  });

              } catch (error) {
                  console.error("Error al cargar productos: ", error);
                  galeria.innerHTML = "<p>Error al cargar los productos. Intenta recargar la página.</p>";
              }
          }

          // Llamamos a la función para que se ejecute
          cargarProductos();

      }); // Fin del 'DOMContentLoaded'

    </script>

</body>
</html>


