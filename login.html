<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login - Ángeles Beauty</title>
    
    <link rel="stylesheet" href="style.css"> 
</head>
<body>

    <main class="login-container">
        
        <form id="login-form" class="login-form">
            <h1>Ángeles Beauty</h1>
            <h2>Acceso de Administrador</h2>
            
            <div class="form-group">
                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" required>
            </div>
            
            <div class="form-group">
                <label for="password">Contraseña:</label>
                <input type="password" id="password" required>
            </div>
            
            <button type="submit" class="boton-comprar">Iniciar Sesión</button>
            
            <p id="error-message" class="error-texto"></p>
        </form>
        
    </main>


    <script type="module">
    
      // --- 1. INICIALIZACIÓN DE FIREBASE ---
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
      
      // ¡¡NUEVOS IMPORTS!! Importamos las funciones de Autenticación
      import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
      
      // ¡¡MUY IMPORTANTE!!
      // Pega aquí tu objeto 'firebaseConfig' (el mismo de index.html)
      const firebaseConfig = {
        apiKey: "AIzaSyBYW_DwpaBSYYtxAVulvpJQw16_uFDEM6o",
        authDomain: "tu-proyecto.firebaseapp.com",
        projectId: "tu-proyecto",
        // ... etc ...
      };

      // Inicializa Firebase App
      const app = initializeApp(firebaseConfig);
      
      // ¡¡NUEVO!! Inicializa Firebase Authentication
      const auth = getAuth(app);


      // --- 2. LÓGICA DEL FORMULARIO DE LOGIN ---
      
      // Espera a que la página se cargue
      window.addEventListener('DOMContentLoaded', () => {
        
        const loginForm = document.querySelector('#login-form');
        const errorMsg = document.querySelector('#error-message');

        if (loginForm) {
            
            // Escuchamos el evento "submit" (cuando se presiona el botón)
            loginForm.addEventListener('submit', async (e) => {
                
                // Prevenimos que la página se recargue (¡vital!)
                e.preventDefault(); 
                
                // 1. Obtenemos los valores del formulario
                const email = loginForm.email.value;
                const password = loginForm.password.value;
                
                try {
                    // 2. Intentamos iniciar sesión con Firebase
                    const userCredential = await signInWithEmailAndPassword(auth, email, password);
                    
                    // 3. ¡ÉXITO! El usuario es correcto
                    console.log("¡Login exitoso!", userCredential.user);
                    errorMsg.textContent = "¡Éxito! Redirigiendo...";
                    errorMsg.className = "exito-texto";
                    
                    // 4. Redirigimos al panel de admin
                    window.location.href = 'admin.html';
                    
                } catch (error) {
                    // 5. ¡FALLO! El usuario o contraseña son incorrectos
                    console.error("Error en el login:", error.code);
                    errorMsg.textContent = "Error: Correo o contraseña incorrectos.";
                    errorMsg.className = "error-texto";
                }
            });
        }
      });

    </script>

</body>
</html>
